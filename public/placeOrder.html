<!doctype html>
<html>
<head>
	<meta charset="UTF-8">
	<title>Happy Cafe Order</title>
	<link rel="stylesheet" href="styles/stylesPlaceOrder.css">
	<link rel="stylesheet" href="styles/general.css">
<!--	<script src="JS/placeOrder.js"></script>-->
	<script src="JS/referencing.js"></script>
	<script>
		var order;
		var orderNo;
		var mealType;
		var foodOptions = ["Pancakes", "Ricotta Pancakes", "Big Breakfast", "Waffles", "Cereal", "Toast", "Chicken Burger", "Beef Burger", "Pizza", "Wrap", "Salad"];
		
		function setup(){
			centering();
		}
		
		function selectFood(choice){
			order = foodOptions[choice];
			if(choice < 6){
				mealType = "Breakfast";
			}else{
				mealType = "Lunch";
			}
			
			if(choice + 1 == orderNo){
				var string = "menuOption" + orderNo;
				document.getElementById(string).style.backgroundColor = "white";
				document.getElementById(string).style.color = "black";
				order = null;
				orderNo = null;
				mealType = null;
				var img = document.getElementById("menuImg");
				img.src = "Images/homeImg.jpg";
			}else{
				if(orderNo != null){
					string = "menuOption" + orderNo;
					document.getElementById(string).style.backgroundColor = "white";
					document.getElementById(string).style.color = "black";
				}
			
				var string = "menuOption" + (+choice + +1);
				var button = document.getElementById(string);
				button.style.backgroundColor = "black";
				button.style.color = "white";
				orderNo = choice + 1;
			
				var string = "Images/FoodMenuItems/" + orderNo + ".jpg";
				var img = document.getElementById("menuImg");
				img.src = string;
			}
		}
		
		function centering(){
			var w = window.innerWidth;
			var h = window.innerHeight;
			var string = w - 140 + "px";
			
			document.getElementById("copyright").style.left = string;
			
			string = h/2 - 40 + "px";
			document.getElementById("send").style.top = string;
		}
			
		function sendData(){
			var time = new Date();
			var hours = time.getHours();
			var minutes = time.getMinutes();
			var seconds = time.getSeconds();
			var months = time.getMonth();
			months ++;
			var year = time.getFullYear();
			var day = time.getDate();
			
			var timestamp = day + "/" + months + "/" + year + " " +hours + ":" + minutes + "." + seconds;
			
			const data = { mealType, order, timestamp };
			const options = {
				method: 'POST',
				headers: {
					'Content-Type': 'order/json',
					'Content': JSON.stringify(data)
				},
			};
			
			fetch('/API', options).then(response => {
				response = response.json().then(response => {
					console.log(response);
					alert("Your order has been sent, Thank you for shopping with us!")
				});
			});
		}
	</script>
	
</head>

<body  onload="setup()">
	<div id="header">
		<img src="Images/logo.jpg" id="logo" alt="logo">
		<hr id="divider1" class="dividers" size="80" width="0">
		<a href="index.html" id="href1" class="links">Home</a>
		<a href="placeOrder.html" id="href2" class="links">Place an Order</a>
		<a href="menu.html" id="href3" class="links">Our Menu</a>
		<a href="recipies.html" id="href4" class="links">Our Recipies</a>
		<a href="mailto: JPapazoglou@stpeters.sa.edu.au?Subject=%20Happy%20Cafe" id="href5" class="links">Contact Us</a>
	</div>
	
	<div id="options">
		<button id="menuOption1" onclick="selectFood(0)" class="txt menuItems">Pancakes, 9.00$</button>
		<button id="menuOption2" onclick="selectFood(1)" class="txt menuItems">Ricotta Pancakes, 8.50$</button>
		<button id="menuOption3" onclick="selectFood(2)" class="txt menuItems">Big Breakfast, 13.00$</button>
		<button id="menuOption4" onclick="selectFood(3)" class="txt menuItems">Waffles, 9.00$</button>
		<button id="menuOption5" onclick="selectFood(4)" class="txt menuItems">Cereal, 4.00$</button>
		<button id="menuOption6" onclick="selectFood(5)" class="txt menuItems">Toast, 5.00$</button>
		<button id="menuOption7" onclick="selectFood(6)" class="txt menuItems">Chicken Burger, 18.00$</button>
		<button id="menuOption8" onclick="selectFood(7)" class="txt menuItems">Beef Burger, 19.50$</button>
		<button id="menuOption9" onclick="selectFood(8)" class="txt menuItems">Pizza, 22.00$</button>
		<button id="menuOption10" onclick="selectFood(9)" class="txt menuItems">Wrap, 11.20$</button>
		<button id="menuOption11" onclick="selectFood(10)" class="txt menuItems">Salad, 9.80$</button>
	</div>
	
	<button id="send" onclick="sendData()" class="txt menuItems">Place Order</button>
	<img id="menuImg" src="Images/homeImg.jpg" alt="our stunning view">
		 
	<div id="footer">
		<button onclick="generateReference()" id="refButton">Get Reference Here</button>
		<p id="copyright" class="txt">Â© Happy Cafe 2020</p>
	</div>
</body>
</html>
